<?xml version="1.0" encoding="UTF-8"?>

<!--
XML中的特殊符号只有5种，<、>、&、’和”。
这5种特殊号对应的字符如下：
<       &lt;
>       &gt;
&       &amp;
'       &apos;
"       &quot;
-->

<conf>
    <gperftools>
        <!-- =1：开启cpu剖析，=0不开启cpu剖析。不配置则默认为0 -->
        <enable_cpu_profiling>0</enable_cpu_profiling>
        <!-- =1：开启内存剖析，=0不开启内存剖析。不配置则默认为0 -->
        <enable_mem_profiling>0</enable_mem_profiling>
        <!-- 是否立即清理空闲内存池，=1：清理，=0：不清理。不配置则默认为0 -->
        <release_free_mem>0</release_free_mem>
    </gperftools>

    <tcp>
        <!-- tcp监听地址和端口 -->
        <addr_port>0.0.0.0:10000</addr_port>

        <!-- 限制最大连接数，即同时在线数，不配置或配置为0表示无限制，依据系统处理能力 -->
        <conn_count_limit>0</conn_count_limit>

        <inactive_conn>
            <!-- 定时检查不再活跃的客户端连接并关闭，不配置或配置为0则不启动该定时器 -->
            <check_interval>
                <sec>60</sec>
                <usec>0</usec>
            </check_interval>

            <!-- 从上次接收消息算起，持续多久未接收新的消息，即认为该连接不再活跃。单位：秒 -->
            <life>1800</life>
        </inactive_conn>

        <!-- 在一定时间内（单位：秒）收到的消息条数如果超过指定值，则认为是网络风暴，服务器会断开连接 -->
        <storm_interval>10</storm_interval>
        <storm_threshold>1000</storm_threshold>

        <!-- tcp io线程数，>=1。建议等于CPU核心数 -->
        <thread_count>2</thread_count>

        <!-- 一个tcp线程内所有的logic so共享的逻辑，其中的代码一般不需要加锁。没有则不配置 -->
        <common_logic_so>./libtcp_common_logic.so</common_logic_so>

        <!-- tcp logic so group，可配置多个logic so，没有则不配置，但此时必须配置work_logic_so，用于处理任务 -->
        <logic_so_group>
            <logic_so>./libtcp_logic.so</logic_so>
        </logic_so_group>
    </tcp>

    <ws>
        <!-- ws监听网卡和端口，不配置iface表示在所有ip上监听 -->
        <!-- <iface>wlp4s0</iface> -->

        <port>10080</port>

        <security>
            <port>10443</port>

            <!-- wss秘钥文件 -->
            <certificate_chain_file_path>../conf/xxx_com.crt</certificate_chain_file_path>
            <private_key_file_path>../conf/xxx_com.key</private_key_file_path>

            <!-- <certificate_chain_file_path>../conf/sunlands_com/star_sunlands_com.crt</certificate_chain_file_path>
            <private_key_file_path>../conf/sunlands_com/star_sunlands_com.key</private_key_file_path> -->
        </security>

        <!-- 网络收发超时，单位：秒 -->
        <network_roundtrip_timeout>10</network_roundtrip_timeout>

        <!-- 在idle连接上发送ping的间隔，单位：秒 -->
        <ping_pong_interval></ping_pong_interval>

        <!-- 限制最大连接数，即同时在线数，不配置或配置为0表示无限制，依据系统处理能力 -->
        <conn_count_limit>0</conn_count_limit>

        <inactive_conn>
            <!-- 定时检查不再活跃的客户端连接并关闭，不配置或配置为0则不启动该定时器 -->
            <check_interval>
                <sec>0</sec>
                <usec>0</usec>
            </check_interval>

            <!-- 从上次接收消息算起，持续多久未接收新的消息，即认为该连接不再活跃。单位：秒 -->
            <life>1800</life>
        </inactive_conn>

        <!-- 在一定时间内（单位：秒）收到的消息条数如果超过指定值，则认为是网络风暴，服务器会断开连接 -->
        <storm_interval>10</storm_interval>
        <storm_threshold>1000</storm_threshold>

        <!-- ws io线程数，>=1。建议等于CPU核心数 -->
        <thread_count>2</thread_count>

        <!-- 一个ws线程内所有的ws logic so共享的逻辑，其中的代码一般不需要加锁。没有则不配置 -->
        <common_logic_so>./libws_common_logic.so</common_logic_so>

        <!-- ws logic so group，可配置多个logic so，没有则不配置，但此时必须配置work_logic_so，用于处理任务 -->
        <logic_so_group>
            <logic_so>./libws_logic.so</logic_so>
        </logic_so_group>

        <http>
            <!-- idle连接持续时间，单位：秒 -->
            <keepalive_timeout>30</keepalive_timeout>

            <!-- 一个ws线程内所有的http logic so共享的逻辑，其中的代码一般不需要加锁。没有则不配置 -->
            <common_logic_so>./libhttp_common_logic.so</common_logic_so>

            <!-- http logic so group，可配置多个logic so，没有则不配置，但此时必须配置work_logic_so，用于处理任务 -->
            <logic_so_group>
                <logic_so>./libhttp_logic.so</logic_so>
            </logic_so_group>
        </http>
    </ws>
    
    <!-- 应用相关的配置 -->
    <app>
        <test_mode>0</test_mode>
    </app>
</conf>
